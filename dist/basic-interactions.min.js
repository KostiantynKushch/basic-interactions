class t{constructor({globalNameSpace:t="BasicInteractions",toggleSelector:e="data-toggle",targetToggleSelector:s="data-toggle-target",classToggleAction:l="data-toggle-action",resetSelector:i="data-reset",resetsGroupSelector:o="data-group-reset",scrollSelector:r="data-scroll",scrollClasses:c=["overflow-hidden","fixed","left-0","right-0"],attachAttributeSelector:a="data-attach",attachAttributeValueSelector:h="data-attach-value",detachAttributeSelector:u="data-detach"}={}){this.timeoutId=null,window[t]={resets:[]},this.resets=window[t].resets,this.toggleSelector=e,this.targetToggleSelector=s,this.classToggleAction=l,this.resetSelector=i,this.resetsGroupSelector=o,this.attachAttributeSelector=a,this.attachAttributeValueSelector=h,this.detachAttributeSelector=u,this.scrollSelector=r,this.scrollClasses=c,this.scrollPosition=0,this.isActiveScroll=!1}debounce(t){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{t()}),300)}disableScroll(){this.scrollPosition=window.scrollY,document.body.style.top=`-${this.scrollPosition}px`,document.body.classList.add(...this.scrollClasses),this.isActiveScroll=!0}enableScroll(){document.body.classList.remove(...this.scrollClasses),document.body.style.removeProperty("top"),window.scrollTo(0,this.scrollPosition),this.isActiveScroll=!1}toggleScroll(t){"boolean"==typeof t?t?!this.isActiveScroll&&this.disableScroll():this.isActiveScroll&&this.enableScroll():this.isActiveScroll?this.enableScroll():this.disableScroll()}updateAttributes(t){if(t){const e=t=>t?.toLowerCase().split(" ").filter((t=>""!==t));this.toggleTarget=t.getAttribute(this.targetToggleSelector),this.classesToToggle=e(t.getAttribute(this.toggleSelector)),this.toggleAction=t.getAttribute(this.classToggleAction),this.resetActions=e(t.getAttribute(this.resetSelector)),this.resetsGroup=t.closest(`[${this.resetsGroupSelector}]`),this.scrollAction=t.getAttribute(this.scrollSelector),this.attachAttribute=t.getAttribute(this.attachAttributeSelector),this.attachAttributeValue=t.getAttribute(this.attachAttributeValueSelector),this.detachAttribute=t.getAttribute(this.detachAttributeSelector)}else this.toggleTarget=null,this.classesToToggle=null,this.toggleAction=null,this.resetActions=null,this.resetsGroup=null,this.scrollAction=null,this.attachAttribute=null,this.attachAttributeValue=null,this.detachAttribute=null}handleToggleAttribute(t,{attribute:e,value:s,isAttached:l}={}){if(!(this.attachAttribute&&this.attachAttributeValue||this.detachAttribute||e))return;const i=this.attachAttribute||this.detachAttribute||e;t.hasAttribute(i)||"boolean"==typeof l&&l?t.removeAttribute(i):t.setAttribute(i,this.attachAttributeValue||s)}handleToggleClasses(t){let e;if(this.toggleAction)switch(this.toggleAction.toLowerCase()){case"add":e=!0;break;case"remove":e=!1}this.classesToToggle.forEach((s=>{t.classList.toggle(s,e)}))}handleToggleScroll(){if(this.scrollAction)switch(this.scrollAction){case"toggle":this.toggleScroll();break;case"enable":this.enableScroll();break;case"disable":this.disableScroll()}}handleInteraction(t){if(!t)return;let e=t.closest(`[${this.toggleSelector}]`);if(e){if(this.updateAttributes(e),this.resetsGroup&&this.resets?.length>0&&this.handleGroupReset(),this.toggleTarget&&(e=document.querySelector(this.toggleTarget)),this.handleToggleClasses(e),this.handleToggleScroll(),this.handleToggleAttribute(e),this.resetActions||this.resets){const t=this.resets.findIndex((t=>t?.node===e));-1===t&&this.resetActions?this.resets.push({node:e,resetActions:this.resetActions,resetsGroup:this.resetsGroup,classes:this.classesToToggle,scroll:this.scrollAction,toggleAttachAttribute:{attribute:this.attachAttribute||this.detachAttribute,value:this.attachAttributeValue,isAttached:!!this.attachAttribute||!this.detachAttribute&&null}}):this.resets.splice(t,1)}this.updateAttributes()}}handleResets(t){if(!t)return;this.resets.filter((e=>e.resetActions.some((e=>e===t)))).forEach((t=>{this.entryReset(t)}))}handleGroupReset(){const t=this.resets.find((t=>t.resetsGroup===this.resetsGroup));t&&this.entryReset(t)}entryReset(t){t&&(t.classes.forEach((e=>t.node.classList.toggle(e))),t.scroll&&this.toggleScroll(),null!==t.toggleAttachAttribute.isAttached&&this.handleToggleAttribute(t.node,t.toggleAttachAttribute),this.resets.splice(this.resets.findIndex((e=>e===t)),1))}}export{t as default};
