class t{constructor({globalNameSpace:t="BasicInteractions",toggleSelector:e="data-toggle",toggleSelfSelector:s="data-toggle-self",targetToggleSelector:l="data-toggle-target",classToggleAction:i="data-toggle-action",resetSelector:o="data-reset",resetsGroupSelector:r="data-group-reset",scrollSelector:c="data-scroll",scrollClasses:a=["overflow-hidden","fixed","left-0","right-0"],attachAttributeSelector:h="data-attach",attachAttributeValueSelector:g="data-attach-value",detachAttributeSelector:u="data-detach"}={}){this.timeoutId=null,window[t]={resets:[]},this.resets=window[t].resets,this.toggleSelector=e,this.toggleSelfSelector=s,this.targetToggleSelector=l,this.classToggleAction=i,this.resetSelector=o,this.resetsGroupSelector=r,this.attachAttributeSelector=h,this.attachAttributeValueSelector=g,this.detachAttributeSelector=u,this.scrollSelector=c,this.scrollClasses=a,this.scrollPosition=0,this.isActiveScroll=!1}debounce(t){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{t()}),300)}disableScroll(){this.scrollPosition=window.scrollY,document.body.style.top=`-${this.scrollPosition}px`,document.body.classList.add(...this.scrollClasses),this.isActiveScroll=!0}enableScroll(){document.body.classList.remove(...this.scrollClasses),document.body.style.removeProperty("top"),window.scrollTo(0,this.scrollPosition),this.isActiveScroll=!1}toggleScroll(t){"boolean"==typeof t?t?!this.isActiveScroll&&this.disableScroll():this.isActiveScroll&&this.enableScroll():this.isActiveScroll?this.enableScroll():this.disableScroll()}updateAttributes(t){if(t){const e=t=>t?.toLowerCase().split(" ").filter((t=>""!==t));this.toggleTarget=t.getAttribute(this.targetToggleSelector),this.classesToToggle=e(t.getAttribute(this.toggleSelector)),this.classesToToggleSelf=this.toggleSelfSelector?e(t.getAttribute(this.toggleSelfSelector)):null,this.toggleAction=t.getAttribute(this.classToggleAction),this.resetActions=e(t.getAttribute(this.resetSelector)),this.scrollAction=t.getAttribute(this.scrollSelector),this.attachAttribute=t.getAttribute(this.attachAttributeSelector),this.attachAttributeValue=t.getAttribute(this.attachAttributeValueSelector),this.detachAttribute=t.getAttribute(this.detachAttributeSelector),this.resetsGroup=t.closest(`[${this.resetsGroupSelector}]`)}else this.toggleTarget=null,this.classesToToggle=null,this.classesToToggleSelf=null,this.toggleAction=null,this.resetActions=null,this.resetsGroup=null,this.scrollAction=null,this.attachAttribute=null,this.attachAttributeValue=null,this.detachAttribute=null}handleToggleAttribute(t,{attribute:e,value:s,isAttached:l}={}){if(!(this.attachAttribute&&this.attachAttributeValue||this.detachAttribute||e))return;const i=this.attachAttribute||this.detachAttribute||e;t.hasAttribute(i)||"boolean"==typeof l&&l?t.removeAttribute(i):t.setAttribute(i,this.attachAttributeValue||s)}handleToggleClasses(t,e){let s;if(this.toggleAction)switch(this.toggleAction.toLowerCase()){case"add":s=!0;break;case"remove":s=!1}this.classesToToggle.forEach((e=>{t.classList.toggle(e,s)})),e&&this.classesToToggleSelf.forEach((t=>{e.classList.toggle(t,s)}))}handleToggleScroll(){if(this.scrollAction)switch(this.scrollAction){case"toggle":this.toggleScroll();break;case"enable":this.enableScroll();break;case"disable":this.disableScroll()}}handleInteraction(t){if(!t)return;let e=t.closest(`[${this.toggleSelector}]`);if(!e)return;this.updateAttributes(e);const s=this.classesToToggleSelf?e:null;if(this.resetsGroup&&this.resets?.length>0&&this.handleGroupReset(),this.toggleTarget&&(e=document.querySelector(this.toggleTarget)),this.handleToggleClasses(e,s),this.handleToggleScroll(),this.handleToggleAttribute(e),this.resetActions||this.resets){const t=this.resets.findIndex((t=>t?.node===e));-1===t&&this.resetActions?this.resets.push({node:e,self:s,selfClasses:this.classesToToggleSelf,resetActions:this.resetActions,resetsGroup:this.resetsGroup,classes:this.classesToToggle,scroll:this.scrollAction,toggleAttachAttribute:{attribute:this.attachAttribute||this.detachAttribute,value:this.attachAttributeValue,isAttached:!!this.attachAttribute||!this.detachAttribute&&null}}):this.resets.splice(t,1)}this.updateAttributes()}handleResets(t){if(!t)return;this.resets.filter((e=>e.resetActions.some((e=>e===t)))).forEach((t=>{this.entryReset(t)}))}handleGroupReset(){const t=this.resets.find((t=>t.resetsGroup===this.resetsGroup));t&&this.entryReset(t)}entryReset(t){t&&(t.classes?.forEach((e=>t.node.classList.toggle(e))),t.selfClasses?.forEach((e=>t.self.classList.toggle(e))),t.scroll&&this.toggleScroll(),null!==t.toggleAttachAttribute.isAttached&&this.handleToggleAttribute(t.node,t.toggleAttachAttribute),this.resets.splice(this.resets.findIndex((e=>e===t)),1))}}export{t as default};
